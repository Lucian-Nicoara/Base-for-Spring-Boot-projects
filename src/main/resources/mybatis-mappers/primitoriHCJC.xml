<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.lucian.dgaspc.mapper.PrimitoriHCJCMapper">
	<select id = "getPrimitoriByIdHCJC" resultType = "com.lucian.dgaspc.model.PrimitorHCJC">
		SELECT 
			p.id,
			p.idHotarareHCJC,
			p.idCompartiment,
			p.compartimentulAdresat,
			p.idPersoanaPrimire,
			p.persoanaPrimire,
			DATE_FORMAT(p.dataPrimirii, '%d.%m.%Y') as dataPrimirii
		FROM 
			primitori_hcjc p
		WHERE
			p.idHotarareHCJC = #{idHotarareHCJC}
	</select>
	
	<insert id="postPrimitorHCJC">
		INSERT INTO primitori_hcjc VALUES(null, #{primitorHCJC.idHotarareHCJC}, #{primitorHCJC.idCompartiment}, #{primitorHCJC.compartimentulAdresat}, #{primitorHCJC.idPersoanaPrimire}, #{primitorHCJC.persoanaPrimire}, STR_TO_DATE(#{primitorHCJC.dataPrimirii}, '%d.%m.%Y'))
	</insert>
	
	<delete id="deletePrimitorHCJCById">
		DELETE FROM primitori_hcjc WHERE id = #{id}
	</delete>
	
	<delete id="deleteAllPrimitoriByIdHCJC">
		DELETE FROM primitori_hcjc WHERE idHotarareHCJC = #{idHotarareHCJC}
	</delete>

</mapper>